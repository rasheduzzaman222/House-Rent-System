{% extends 'base.html' %}
{% block content %}
<h2>Rent Payments for {{ property.title }}</h2>
<p><strong>Location:</strong> {{ property.location }} | <strong>Rent:</strong> {{ property.rent_amount }}</p>

<h3 class="mt-4">Existing Payments</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Tenant ID</th>
            <th>Tenant Name</th>
            <th>Month</th>
            <th>Amount</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
    {% for p in payments %}
        <tr>
            <td>{{ p.tenant_id }}</td>
            <td>{{ p.tenant.full_name if p.tenant else '-' }}</td>
            <td>{{ p.month }}</td>
            <td>{{ p.amount }}</td>
            <td>{{ p.status.value }}</td>
        </tr>
    {% else %}
        <tr><td colspan="5">No payments recorded yet.</td></tr>
    {% endfor %}
    </tbody>
</table>

<h3 class="mt-4">Add / Update Payment</h3>
<form method="post" action="/owner/properties/{{ property.id }}/payments" class="col-md-6">
    <div class="mb-3">
        <label class="form-label">Tenant ID</label>
        <input type="number" name="tenant_id" class="form-control" required>
        <div class="form-text">Enter the tenant's user ID (from the Users list or DB).</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Month</label>
        <input type="month" name="month" class="form-control" required>
        <div class="form-text">Example: 2025-10 (the day will be stored as 01).</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Amount</label>
        <input type="number" step="0.01" name="amount" class="form-control" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Status</label>
        <select name="status" class="form-select">
            <option value="pending">Pending</option>
            <option value="paid">Paid</option>
        </select>
    </div>
    <button class="btn btn-primary" type="submit">Save Payment</button>
    <a class="btn btn-secondary ms-2" href="/owner/dashboard">Back to Dashboard</a>
</form>
{% endblock %}
